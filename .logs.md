# Project Changelog (.logs.md)

## [2026-02-20] - Infrastructure Setup
**Type**: Infrastructure / Rules Creation
**Status**: Completed

### Description
Initial setup of the project's agentic coding environment, focusing on strict MVVM patterns, folder structures, and persistent tracking (logs/corrections/templates).

### Added
- `.agent/rules/coding-standard.md`: Core MVVM rules, 300-line limits, fragmentation.
- `.agent/rules/project-structure.md`: Next.js + Shadcn MVVM hierarchy.
- `.agent/rules/mvp-protocol.md`: Critical hard rules for "MVP" requests (Fullstack + UI/UX Master).
- `.agent/workflows/trace-logs-explain-fix.md`: Debugging protocol.
- `.agent/workflows/create-feature.md`: Feature creation protocol.
- `.corrections`: Tracking behavioral adjustments (MVP Protocol added).
- `.templates`: Tracking reusable patterns.

### Technical Details (MVVM)
- **Isolation**: UI logic strictly in `presentations/`.
- **Boundaries**: Clear separation between `use[Feature]` (ViewModel) and `useApi[Feature]` (Model).
- **Fragmentation**: Enforced `sub-components/` and `sub-helpers/` for any file > 300 lines.
- **MVP Protocol**: Strictly enforced Next.js App Router, MongoDB, Redux, Shadcn, NextAuth, Middleware, and Premium UI/UX.

### Impact Analysis
- **Stability**: High. No existing code modified.
- **Rules**: Strict adherence enforced via Critical Rules in `mvp-protocol.md`.

### Corrections Logged
- AI must not create `.logs/` folder until a project is initiated.
- AI must use `.logs.md` for consistent tracking.
- AI must strictly follow the "MVP" trigger for Fullstack + UI/UX Master mode.

---

## [2026-02-20] - PCI DSS Security Implementation (Project: ai-builder-template)
**Type**: Security / Compliance
**Status**: Completed

### Description
Implemented a comprehensive security and compliance layer following PCI DSS standards for the `ai-builder-template`. This ensures all projects generated from this template have production-ready security defaults.

### Added
- `proxy.ts`: Route Protection Proxy (Next.js 16 convention).
- `lib/security/sanitize.ts`: XSS input sanitization.
- `lib/security/audit.ts`: Audit logging with automatic sensitive data redaction.
- `lib/security/validation.ts`: Zod-based request validation with reusable schemas.
- `lib/security/rate-limit.ts`: Categorized rate limiting (Auth: 20/15m, Default: 100/15m).
- `lib/security/session.ts`: Secure cookie/session defaults (HttpOnly, Secure, SameSite, 30min timeout).
- `lib/security/index.ts`: Barrel export for all security utilities.
- `next.config.ts`: Hardened with security headers and body size limit.
- `.env.example`: PCI DSS compliant environment variable documentation.
- `app/api/sample/route.ts`: Reference secure API route implementation.
- `scripts/test-api-security.ts`: CRUD test script for security layer.

### Build & Lint
- `npm run lint`: Passed (pre-existing Shadcn issues only).
- `npm run build`: Exit Code 0.

### Corrections During Task
- Migrated `middleware.ts` to `proxy.ts` per Next.js 16 deprecation.
- Confused workspace vs project log boundaries; enforced dual-level logging.
- Destroyed previous logs by replacing instead of appending — restored and added permanent rule.

---

## [2026-02-20] - Booking Page Refactor & Coding Standard Update (Project: book-me-event/ai-template)
**Type**: Feature Refactor / Rule Hardening
**Status**: Completed

### Description
Updated the project's coding standards to enforce the **DRY (Don't Repeat Yourself)** philosophy. Applied the **No-Carding** rule to the Booking page, replacing standard Shadcn Card components with a custom Glassmorphism aesthetic. Removed redundant availability checking logic to streamline the user experience.

### Rule Updates
- `.agent/rules/coding-standard.md`: Added **DRY Philosophy** as a Critical Rule §0.
- `.agent/workflows/senior-dev-rules.md`: Confirmed duration-based time tracking and template logging.
- `.templates`: Added **Glassmorphism Form (No-Carding)** template for cross-project reuse.

### Implementation Details (Project: book-me-event/ai-template)
- `presentations/Booking/index.tsx`: Replaced `Card` with custom `div` containers and removed "Check Availability" UI.
- `presentations/Booking/useBooking.ts`: Removed redundant availability states and functions.
- `proxy.ts`: Renamed from `middleware.ts` and updated for Next.js 16 compliance.

### Build & Verification
- `npm run lint`: Passed with 0 errors (clean up of unused imports).
- `npm run build`: Exit Code 0 (Success).
- `git`: Committed and ready for push if requested.

---

## [2026-02-20] - Senior Dev Mind RAG System (Workspace-Level Infrastructure)
**Type**: Infrastructure / AI Architecture
**Status**: Completed

### Description
Built a complete RAG (Retrieval Augmented Generation) system that stores `.agent/rules/`, `.agent/workflows/`, and `.agent/template/**` in Qdrant (localhost:6333) for semantic search. This eliminates prompt bloat by retrieving only relevant rules per task instead of loading all ~20K tokens every time.

### Added (rag/ directory)
- `rag/package.json`: Project config with 9 npm scripts (ingest, query, serve, sync, etc.)
- `rag/src/config.mjs`: Environment config loader with validation
- `rag/src/embedder.mjs`: Dual embedding provider (Ollama local + Groq fallback)
- `rag/src/chunker.mjs`: Markdown chunker with auto-tagging (category, tags, priority)
- `rag/src/qdrant.mjs`: Qdrant client wrapper with filtered semantic search
- `rag/src/ingest.mjs`: Full ingestion pipeline (chunk → embed → upsert)
- `rag/src/query.mjs`: CLI query tool with category/tag/priority filters
- `rag/src/server.mjs`: HTTP API server (port 6444) for agent integration
- `rag/src/sync.mjs`: Auto-sync with file watcher, single-file, and full re-ingest modes
- `rag/src/status.mjs`: System health checker
- `rag/src/reset.mjs`: Collection reset utility
- `rag/README.md`: Quick start documentation
- `rag/GUIDE.md`: Full integration guide for Antigravity, Cursor, Windsurf, Groq, Ollama, Roo Code

### Technical Details
- **Qdrant collection**: `senior_dev_mind` — 107 points, 768-dim cosine vectors
- **Embedding model**: `nomic-embed-text` via Ollama (local, free)
- **Chunk breakdown**: 48 rules, 37 templates, 20 workflows, 2 memory
- **Auto-tagging**: 16 tag categories detected via keyword matching
- **Priority detection**: critical/high/medium/normal based on content keywords
- **Key endpoint**: `POST /context` — returns formatted rules for direct LLM injection
- **File watcher**: `npm run sync:watch` auto-re-ingests on `.md` file changes

### Impact Analysis
- **Token savings**: ~15K tokens/request (only relevant 2-5K injected vs full 20K)
- **Agent-agnostic**: Works with any LLM agent via HTTP API
- **No existing code modified**: Entirely new `rag/` directory

